<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Valuation Tool</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        #output-section {
            margin-top: 20px;
            text-align: center;
        }

        .output-field {
            font-size: 1.2em;
            font-weight: bold;
        }

        #message {
            margin-top: 15px;
            font-size: 1.1em;
            color: #333;
        }

        #input-section {
            transition: opacity 0.5s ease-out;
        }

        #input-section.hidden {
            opacity: 0;
            pointer-events: none;
        }

        button {
            display: block;
            width: 100%;
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            margin-top: 10px;
            font-size: 1.1em;
        }

        button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <h1>Valuation Tool</h1>
    <form id="valuationForm">
        <div id="input-section">
            <div class="input-field">
                <label for="revenue2024">Umsatz (Revenue) 2024:</label>
                <input type="number" id="revenue2024" name="revenue2024">
            </div>
            <div class="input-field">
                <label for="materialaufwand2024">Materialaufwand 2024:</label>
                <input type="number" id="materialaufwand2024" name="materialaufwand2024">
            </div>
            <div class="input-field">
                <label for="fte">Vollzeitphysiotherapeuten (FTE):</label>
                <input type="number" id="fte" name="fte">
            </div>
            <button type="button" onclick="calculate()">Calculate</button>
        </div>
        
        <div id="output-section" style="display:none;">
            <div class="output-field">
                <label for="companyValue2024">Unternehmenswert 2024 (Range):</label>
                <p id="companyValue2024"></p>
            </div>
            <div class="output-field">
                <p id="message"></p>
            </div>
        </div>
    </form>
    <script>
        function getMultipleRange(ebitda) {
            if (ebitda < 200000) return [0, 0];
            if (ebitda < 350000) return [2.5, 3.5];
            if (ebitda < 600000) return [2.75, 4.0];
            if (ebitda < 1200000) return [3.0, 4.25];
            return [0, 0]; // Above 1.2M requires individual assessment
        }
        
        function calculate() {
            const revenue2024 = parseFloat(document.getElementById('revenue2024').value) || 0;
            const materialaufwand2024 = parseFloat(document.getElementById('materialaufwand2024').value) || 0;
            const fte = parseFloat(document.getElementById('fte').value) || 0;
            
            const netRevenue2024 = revenue2024 - materialaufwand2024;
            const ebitda2024 = netRevenue2024 * 0.3; // Example EBITDA calculation
            const [multipleMin, multipleMax] = getMultipleRange(ebitda2024);
            const companyValueMin = ebitda2024 * multipleMin;
            const companyValueMax = ebitda2024 * multipleMax;
            
            let message = "";
            if (ebitda2024 < 200000 && fte < 4) {
                message = "Praxis ist leider zu klein für eine automatisches Gutachten, bitte wenden Sie sich an Ihren Treuhandexperten.";
            } else if (ebitda2024 >= 1200000) {
                message = "Aufgrund der Grösse der Praxis muss dies individuell beurteilt werden, gerne sprechen wir mit Ihnen dazu.";
            } else {
                message = "Basierend auf einer ersten Einschätzung könnte Ihre Praxis den folgenden Unternehmenswert aufweisen. Wenn Sie mehr erfahren wollen, kontaktieren Sie uns.";
            }
            
            document.getElementById('companyValue2024').textContent = `${companyValueMin.toFixed(2)} - ${companyValueMax.toFixed(2)}`;
            document.getElementById('message').textContent = message;
            
            // Hide input section and show results
            document.getElementById('input-section').style.display = "none";
            document.getElementById('output-section').style.display = "block";
        }
    </script>
</body>
</html>
