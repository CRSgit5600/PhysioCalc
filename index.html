<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unternehmensbewertung</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            padding: 10px;
            text-align: right;
            border: 1px solid #ddd;
        }
        th {
            text-align: left;
        }
        input[type="number"], input[type="email"] {
            width: 150px;
            padding: 5px;
        }
        button {
            padding: 10px 15px;
            margin-top: 15px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        .output-field {
            margin: 20px 0;
        }
    </style>
</head>
<body>

<h1>Unternehmensbewertung für Physiotherapie-Praxien</h1>

<form id="valuationForm">
    <table>
        <thead>
            <tr>
                <th>Posten</th>
                <th>2023</th>
                <th>2024</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>EBITDA</td>
                <td><input type="number" id="ebitda2023" name="ebitda2023"></td>
                <td><input type="number" id="ebitda2024" name="ebitda2024"></td>
            </tr>
        </tbody>
    </table>

    <button type="button" onclick="calculate()">Berechnen</button>

    <div id="output-section" style="display:none;">
        <div class="output-field">
            <label for="companyValue2024">Unternehmenswert 2024 (Range):</label>
            <p id="companyValue2024"></p>
        </div>
        <div class="output-field">
            <p id="message"></p>
        </div>
        <div class="output-field">
            <label for="email">Ergebnis per E-Mail senden:</label>
            <input type="email" id="email" placeholder="Ihre E-Mail-Adresse">
            <button type="button" onclick="sendEmail()">Senden</button>
        </div>
    </div>
</form>

<script>
    function getMultipleRange(ebitda) {
        if (ebitda < 200000) {
            return null;
        } else if (ebitda >= 200000 && ebitda < 350000) {
            return [2.5, 3.5];
        } else if (ebitda >= 350000 && ebitda < 600000) {
            return [2.75, 4.0];
        } else if (ebitda >= 600000 && ebitda < 1200000) {
            return [3.0, 4.25];
        } else {
            return null;
        }
    }

    function calculate() {
        const ebitda2024 = parseFloat(document.getElementById('ebitda2024').value) || 0;
        const multipleRange = getMultipleRange(ebitda2024);
        const outputSection = document.getElementById("output-section");
        const companyValue2024 = document.getElementById("companyValue2024");
        const message = document.getElementById("message");
        
        outputSection.style.display = "block";
        
        if (ebitda2024 < 200000) {
            message.innerText = "Praxis ist leider zu klein für ein automatisches Gutachten, bitte wenden Sie sich an Ihren Treuhandexperten.";
            companyValue2024.innerText = "";
        } else if (ebitda2024 >= 1200000) {
            message.innerText = "Aufgrund der Größe der Praxis muss dies individuell beurteilt werden, gerne sprechen wir mit Ihnen dazu.";
            companyValue2024.innerText = "";
        } else {
            const lowValuation = (ebitda2024 * multipleRange[0]).toLocaleString('de-CH', { style: 'currency', currency: 'CHF' });
            const highValuation = (ebitda2024 * multipleRange[1]).toLocaleString('de-CH', { style: 'currency', currency: 'CHF' });
            message.innerText = "Basierend auf einer ersten Einschätzung könnte Ihre Praxis den folgenden Unternehmenswert aufweisen. Wenn Sie mehr erfahren wollen, kontaktieren Sie uns:";
            companyValue2024.innerText = `${lowValuation} - ${highValuation}`;
        }
    }

    function sendEmail() {
        const email = document.getElementById("email").value;
        const valuation = document.getElementById("companyValue2024").innerText;
        const message = document.getElementById("message").innerText;
        
        if (!email) {
            alert("Bitte geben Sie eine gültige E-Mail-Adresse ein.");
            return;
        }

        const mailtoLink = `mailto:${email}?subject=Ihre%20Unternehmensbewertung&body=${encodeURIComponent(message + "\n\n" + valuation)}`;
        window.location.href = mailtoLink;
    }
</script>

</body>
</html>
